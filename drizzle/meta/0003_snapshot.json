{
  "version": "6",
  "dialect": "sqlite",
  "id": "0003",
  "prevId": "0002",
  "tables": {
    "conversations": {
      "name": "conversations",
      "columns": {
        "id": { "name": "id", "type": "text", "primaryKey": true, "notNull": true, "autoincrement": false },
        "chat_id": { "name": "chat_id", "type": "text", "primaryKey": false, "notNull": true, "autoincrement": false },
        "created_at": { "name": "created_at", "type": "integer", "primaryKey": false, "notNull": true, "autoincrement": false },
        "updated_at": { "name": "updated_at", "type": "integer", "primaryKey": false, "notNull": true, "autoincrement": false }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "messages": {
      "name": "messages",
      "columns": {
        "id": { "name": "id", "type": "text", "primaryKey": true, "notNull": true, "autoincrement": false },
        "conversation_id": { "name": "conversation_id", "type": "text", "primaryKey": false, "notNull": true, "autoincrement": false },
        "role": { "name": "role", "type": "text", "primaryKey": false, "notNull": true, "autoincrement": false },
        "content": { "name": "content", "type": "text", "primaryKey": false, "notNull": true, "autoincrement": false },
        "tool_call_id": { "name": "tool_call_id", "type": "text", "primaryKey": false, "notNull": false, "autoincrement": false },
        "created_at": { "name": "created_at", "type": "integer", "primaryKey": false, "notNull": true, "autoincrement": false }
      },
      "indexes": {},
      "foreignKeys": {
        "messages_conversation_id_conversations_id_fk": {
          "name": "messages_conversation_id_conversations_id_fk",
          "tableFrom": "messages",
          "tableTo": "conversations",
          "columnsFrom": ["conversation_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "pending_approvals": {
      "name": "pending_approvals",
      "columns": {
        "id": { "name": "id", "type": "text", "primaryKey": true, "notNull": true, "autoincrement": false },
        "conversation_id": { "name": "conversation_id", "type": "text", "primaryKey": false, "notNull": true, "autoincrement": false },
        "tool_name": { "name": "tool_name", "type": "text", "primaryKey": false, "notNull": true, "autoincrement": false },
        "tool_args": { "name": "tool_args", "type": "text", "primaryKey": false, "notNull": true, "autoincrement": false },
        "risk_level": { "name": "risk_level", "type": "text", "primaryKey": false, "notNull": true, "autoincrement": false },
        "status": { "name": "status", "type": "text", "primaryKey": false, "notNull": true, "autoincrement": false, "default": "'pending'" },
        "message_ref": { "name": "message_ref", "type": "text", "primaryKey": false, "notNull": false, "autoincrement": false },
        "nonce": { "name": "nonce", "type": "text", "primaryKey": false, "notNull": true, "autoincrement": false },
        "created_at": { "name": "created_at", "type": "integer", "primaryKey": false, "notNull": true, "autoincrement": false },
        "resolved_at": { "name": "resolved_at", "type": "integer", "primaryKey": false, "notNull": false, "autoincrement": false }
      },
      "indexes": {
        "pending_approvals_nonce_unique": {
          "name": "pending_approvals_nonce_unique",
          "columns": ["nonce"],
          "isUnique": true
        }
      },
      "foreignKeys": {
        "pending_approvals_conversation_id_conversations_id_fk": {
          "name": "pending_approvals_conversation_id_conversations_id_fk",
          "tableFrom": "pending_approvals",
          "tableTo": "conversations",
          "columnsFrom": ["conversation_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "schema_version": {
      "name": "schema_version",
      "columns": {
        "version": { "name": "version", "type": "integer", "primaryKey": true, "notNull": true, "autoincrement": false },
        "applied_at": { "name": "applied_at", "type": "integer", "primaryKey": false, "notNull": true, "autoincrement": false }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "cron_jobs": {
      "name": "cron_jobs",
      "columns": {
        "id": { "name": "id", "type": "text", "primaryKey": true, "notNull": true, "autoincrement": false },
        "type": { "name": "type", "type": "text", "primaryKey": false, "notNull": true, "autoincrement": false },
        "chat_id": { "name": "chat_id", "type": "text", "primaryKey": false, "notNull": true, "autoincrement": false },
        "task": { "name": "task", "type": "text", "primaryKey": false, "notNull": true, "autoincrement": false },
        "schedule": { "name": "schedule", "type": "text", "primaryKey": false, "notNull": true, "autoincrement": false },
        "next_run_at": { "name": "next_run_at", "type": "integer", "primaryKey": false, "notNull": true, "autoincrement": false },
        "retry_count": { "name": "retry_count", "type": "integer", "primaryKey": false, "notNull": true, "autoincrement": false, "default": 0 },
        "max_retries": { "name": "max_retries", "type": "integer", "primaryKey": false, "notNull": true, "autoincrement": false, "default": 5 },
        "enabled": { "name": "enabled", "type": "integer", "primaryKey": false, "notNull": true, "autoincrement": false, "default": true },
        "created_at": { "name": "created_at", "type": "integer", "primaryKey": false, "notNull": true, "autoincrement": false }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "usage_log": {
      "name": "usage_log",
      "columns": {
        "id": { "name": "id", "type": "text", "primaryKey": true, "notNull": true, "autoincrement": false },
        "timestamp": { "name": "timestamp", "type": "integer", "primaryKey": false, "notNull": true, "autoincrement": false },
        "model": { "name": "model", "type": "text", "primaryKey": false, "notNull": true, "autoincrement": false },
        "input_tokens": { "name": "input_tokens", "type": "integer", "primaryKey": false, "notNull": true, "autoincrement": false },
        "output_tokens": { "name": "output_tokens", "type": "integer", "primaryKey": false, "notNull": true, "autoincrement": false },
        "cost_usd": { "name": "cost_usd", "type": "text", "primaryKey": false, "notNull": true, "autoincrement": false },
        "chat_id": { "name": "chat_id", "type": "text", "primaryKey": false, "notNull": true, "autoincrement": false }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "memory_chunks": {
      "name": "memory_chunks",
      "columns": {
        "id": { "name": "id", "type": "text", "primaryKey": true, "notNull": true, "autoincrement": false },
        "source": { "name": "source", "type": "text", "primaryKey": false, "notNull": true, "autoincrement": false },
        "chunk_index": { "name": "chunk_index", "type": "integer", "primaryKey": false, "notNull": true, "autoincrement": false },
        "content": { "name": "content", "type": "text", "primaryKey": false, "notNull": true, "autoincrement": false },
        "embedding": { "name": "embedding", "type": "text", "primaryKey": false, "notNull": true, "autoincrement": false },
        "created_at": { "name": "created_at", "type": "integer", "primaryKey": false, "notNull": true, "autoincrement": false }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  }
}
